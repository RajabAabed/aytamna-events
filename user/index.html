<!DOCTYPE html>
<html
  lang="ar"
  dir="rtl"
>
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />

    <link
      rel="icon"
      type="image/png"
      href="../assets/images/logo-dark.svg"
    />

    <!-- Css Files -->
    <link
      href="../assets/fullcalendar/packages/core/main.min.css"
      rel="stylesheet"
    />
    <link
      href="../assets/fullcalendar/packages/daygrid/main.min.css"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.rtl.min.css"
      integrity="sha384-gXt9imSW0VcJVHezoNQsP+TNrjYXoGcrqBZJpry9zJt8PCQjobwmhMGaDHTASo9N"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="../assets/css/owl.theme.default.min.css"
    />
    <link
      rel="stylesheet"
      href="../assets/css/owl.carousel.min.css"
    />

    <link
      rel="stylesheet"
      href="../assets/css/custom.css"
    />
    <title>Document</title>
  </head>
  <body>
    <header></header>
    <main>
      <section
        class=""
        id="startchange"
      >
        <div class="container text-center sec-padd">
          <div class="row">
            <div class="col-sm-12">
              <div class="tit">الفعاليات</div>
            </div>
          </div>
          <div
            class="py-3 px-5 mt-5"
            style="
              background-image: linear-gradient(to right, #8bbd24, #4bb8d0);
              border-radius: 15px;
            "
          >
            <form>
              <div class="row row-cols-1 row-cols-md-3 g-4 align-items-end">
                <div class="col-sm-5">
                  <div class="mb-3 text-start">
                    <label
                      for="search"
                      class="form-label text-white"
                      >البحث</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="search"
                      aria-describedby="search"
                      placeholder="ابحث عن فعالية"
                    />
                  </div>
                </div>
                <div class="col-sm-2">
                  <div class="mb-3 text-start">
                    <label
                      for="type"
                      class="form-label text-white"
                      >النوع
                    </label>
                    <select
                      class="form-select"
                      aria-label="Default select example"
                      name="type"
                    >
                      <option
                        selected
                        value="local"
                      >
                        محلي
                      </option>
                      <option value="global">دولي</option>
                    </select>
                  </div>
                </div>
                <div class="col-sm-2">
                  <div class="mb-3 text-start">
                    <label
                      for="category"
                      class="form-label text-white"
                      >الفئة
                    </label>
                    <select
                      class="form-select"
                      aria-label="Default select example"
                      name="category"
                    >
                      <option
                        selected
                        value="all"
                      >
                        الكل
                      </option>
                      <option value="category2">فئة 2</option>
                    </select>
                  </div>
                </div>
                <div class="col-sm-2">
                  <div class="mb-3 text-start">
                    <label
                      for="category"
                      class="form-label text-white"
                      >الموقع
                    </label>
                    <select
                      class="form-select"
                      aria-label="Default select example"
                      name="category"
                    >
                      <option
                        selected
                        value="Riyadh"
                      >
                        الرياض
                      </option>
                      <option value="jaddah">جدة</option>
                    </select>
                  </div>
                </div>
                <div class="col-sm-1">
                  <div class="mb-3">
                    <button class="main-btn rounded">بحث</button>
                  </div>
                </div>
              </div>
            </form>
          </div>
          <div class="row row-cols-1 row-cols-md-3 g-4 pt-5">
            <div class="col-sm-8">
              <div class="mb-3 events">
                <h2 class="eventstitle text-right">فعاليات بالقرب منك</h2>
                <div
                  class="owl-carousel owl-theme slider-events owl-loaded owl-rtl owl-drag"
                >
                  <div class="owl-stage-outer">
                    <div
                      class="owl-stage"
                      style="
                        transform: translate3d(-594px, 0px, 0px);
                        transition: 0.25s;
                        width: 2376px;
                      "
                    >
                      <div
                        class="owl-item"
                        style="width: 178px; margin-right: 20px"
                      >
                        <div class="item">
                          <div class="card h-100 event-custom-box">
                            <div class="card-header global-event">
                              <h3 class="event-tilte">نهاية السنة</h3>
                              <div class="event-badge">
                                <img
                                  src="../assets/icons/calendar.svg"
                                  alt=""
                                  class=""
                                />
                                <span>الأحد, 28 ابريل 2024</span>
                              </div>
                            </div>
                            <div class="card-body d-flex">
                              <h3 class="event-tilte">نهاية السنة</h3>
                              <p class="event-descrption">
                                وصف فعالية نهاية السنة
                              </p>
                              <div class="event-location">
                                <img
                                  src="../assets/icons/location.svg"
                                  alt=""
                                />
                                <span>جدة</span>
                              </div>
                            </div>
                            <a
                              class="card-footer text-center"
                              href="#"
                            >
                              <span>عرض التفاصيل</span>
                              <img
                                src="../assets/icons/arrow-left.svg"
                                alt=""
                              />
                            </a>
                          </div>
                        </div>
                      </div>
                      <div
                        class="owl-item"
                        style="width: 178px; margin-right: 20px"
                      >
                        <div class="item">
                          <div class="card h-100 event-custom-box">
                            <div class="card-header local-event">
                              <h3 class="event-tilte">نهاية السنة</h3>
                              <div class="event-badge">
                                <img
                                  src="../assets/icons/calendar.svg"
                                  alt=""
                                  class=""
                                />
                                <span>الأحد, 28 ابريل 2024</span>
                              </div>
                            </div>
                            <div class="card-body d-flex">
                              <h3 class="event-tilte">نهاية السنة</h3>
                              <p class="event-descrption">
                                وصف فعالية نهاية السنة
                              </p>
                              <div class="event-location">
                                <img
                                  src="../assets/icons/location.svg"
                                  alt=""
                                />
                                <span>جدة</span>
                              </div>
                            </div>
                            <a
                              class="card-footer text-center"
                              href="#"
                            >
                              <span>عرض التفاصيل</span>
                              <img
                                src="../assets/icons/arrow-left.svg"
                                alt=""
                              />
                            </a>
                          </div>
                        </div>
                      </div>
                      <div
                        class="owl-item"
                        style="width: 178px; margin-right: 20px"
                      >
                        <div class="item">
                          <div class="card h-100 event-custom-box">
                            <div class="card-header global-event">
                              <h3 class="event-tilte">نهاية السنة</h3>
                              <div class="event-badge">
                                <img
                                  src="../assets/icons/calendar.svg"
                                  alt=""
                                  class=""
                                />
                                <span>الأحد, 28 ابريل 2024</span>
                              </div>
                            </div>
                            <div class="card-body d-flex">
                              <h3 class="event-tilte">نهاية السنة</h3>
                              <p class="event-descrption">
                                وصف فعالية نهاية السنة
                              </p>
                              <div class="event-location">
                                <img
                                  src="../assets/icons/location.svg"
                                  alt=""
                                />
                                <span>جدة</span>
                              </div>
                            </div>
                            <a
                              class="card-footer text-center"
                              href="#"
                            >
                              <span>عرض التفاصيل</span>
                              <img
                                src="../assets/icons/arrow-left.svg"
                                alt=""
                              />
                            </a>
                          </div>
                        </div>
                      </div>
                      <div
                        class="owl-item"
                        style="width: 178px; margin-right: 20px"
                      >
                        <div class="item">
                          <div class="card h-100 event-custom-box">
                            <div class="card-header global-event">
                              <h3 class="event-tilte">نهاية السنة</h3>
                              <div class="event-badge">
                                <img
                                  src="../assets/icons/calendar.svg"
                                  alt=""
                                  class=""
                                />
                                <span>الأحد, 28 ابريل 2024</span>
                              </div>
                            </div>
                            <div class="card-body d-flex">
                              <h3 class="event-tilte">نهاية السنة</h3>
                              <p class="event-descrption">
                                وصف فعالية نهاية السنة
                              </p>
                              <div class="event-location">
                                <img
                                  src="../assets/icons/location.svg"
                                  alt=""
                                />
                                <span>جدة</span>
                              </div>
                            </div>
                            <a
                              class="card-footer text-center"
                              href="#"
                            >
                              <span>عرض التفاصيل</span>
                              <img
                                src="../assets/icons/arrow-left.svg"
                                alt=""
                              />
                            </a>
                          </div>
                        </div>
                      </div>
                      <div
                        class="owl-item"
                        style="width: 178px; margin-right: 20px"
                      >
                        <div class="item">
                          <div class="card h-100 event-custom-box">
                            <div class="card-header local-event">
                              <h3 class="event-tilte">نهاية السنة</h3>
                              <div class="event-badge">
                                <img
                                  src="../assets/icons/calendar.svg"
                                  alt=""
                                  class=""
                                />
                                <span>الأحد, 28 ابريل 2024</span>
                              </div>
                            </div>
                            <div class="card-body d-flex">
                              <h3 class="event-tilte">نهاية السنة</h3>
                              <p class="event-descrption">
                                وصف فعالية نهاية السنة
                              </p>
                              <div class="event-location">
                                <img
                                  src="../assets/icons/location.svg"
                                  alt=""
                                />
                                <span>جدة</span>
                              </div>
                            </div>
                            <a
                              class="card-footer text-center"
                              href="#"
                            >
                              <span>عرض التفاصيل</span>
                              <img
                                src="../assets/icons/arrow-left.svg"
                                alt=""
                              />
                            </a>
                          </div>
                        </div>
                      </div>
                      <div
                        class="owl-item"
                        style="width: 178px; margin-right: 20px"
                      >
                        <div class="item">
                          <div class="card h-100 event-custom-box">
                            <div class="card-header global-event">
                              <h3 class="event-tilte">نهاية السنة</h3>
                              <div class="event-badge">
                                <img
                                  src="../assets/icons/calendar.svg"
                                  alt=""
                                  class=""
                                />
                                <span>الأحد, 28 ابريل 2024</span>
                              </div>
                            </div>
                            <div class="card-body d-flex">
                              <h3 class="event-tilte">نهاية السنة</h3>
                              <p class="event-descrption">
                                وصف فعالية نهاية السنة
                              </p>
                              <div class="event-location">
                                <img
                                  src="../assets/icons/location.svg"
                                  alt=""
                                />
                                <span>جدة</span>
                              </div>
                            </div>
                            <a
                              class="card-footer text-center"
                              href="#"
                            >
                              <span>عرض التفاصيل</span>
                              <img
                                src="../assets/icons/arrow-left.svg"
                                alt=""
                              />
                            </a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="mb-3 events">
                <h2 class="eventstitle text-right">الأكثر شيوعاً</h2>
                <div
                  class="owl-carousel owl-theme slider-events2 owl-loaded owl-rtl owl-drag"
                >
                  <div class="owl-stage-outer">
                    <div
                      class="owl-stage"
                      style="
                        transform: translate3d(-594px, 0px, 0px);
                        transition: 0.25s;
                        width: 2376px;
                      "
                    >
                      <div
                        class="owl-item"
                        style="width: 178px; margin-right: 20px"
                      >
                        <div class="item">
                          <div class="card h-100 event-custom-box">
                            <div class="card-header global-event">
                              <h3 class="event-tilte">نهاية السنة</h3>
                              <div class="event-badge">
                                <img
                                  src="../assets/icons/calendar.svg"
                                  alt=""
                                  class=""
                                />
                                <span>الأحد, 28 ابريل 2024</span>
                              </div>
                            </div>
                            <div class="card-body d-flex">
                              <h3 class="event-tilte">نهاية السنة</h3>
                              <p class="event-descrption">
                                وصف فعالية نهاية السنة
                              </p>
                              <div class="event-location">
                                <img
                                  src="../assets/icons/location.svg"
                                  alt=""
                                />
                                <span>جدة</span>
                              </div>
                            </div>
                            <a
                              class="card-footer text-center"
                              href="#"
                            >
                              <span>عرض التفاصيل</span>
                              <img
                                src="../assets/icons/arrow-left.svg"
                                alt=""
                              />
                            </a>
                          </div>
                        </div>
                      </div>
                      <div
                        class="owl-item"
                        style="width: 178px; margin-right: 20px"
                      >
                        <div class="item">
                          <div class="card h-100 event-custom-box">
                            <div class="card-header local-event">
                              <h3 class="event-tilte">نهاية السنة</h3>
                              <div class="event-badge">
                                <img
                                  src="../assets/icons/calendar.svg"
                                  alt=""
                                  class=""
                                />
                                <span>الأحد, 28 ابريل 2024</span>
                              </div>
                            </div>
                            <div class="card-body d-flex">
                              <h3 class="event-tilte">نهاية السنة</h3>
                              <p class="event-descrption">
                                وصف فعالية نهاية السنة
                              </p>
                              <div class="event-location">
                                <img
                                  src="../assets/icons/location.svg"
                                  alt=""
                                />
                                <span>جدة</span>
                              </div>
                            </div>
                            <a
                              class="card-footer text-center"
                              href="#"
                            >
                              <span>عرض التفاصيل</span>
                              <img
                                src="../assets/icons/arrow-left.svg"
                                alt=""
                              />
                            </a>
                          </div>
                        </div>
                      </div>
                      <div
                        class="owl-item"
                        style="width: 178px; margin-right: 20px"
                      >
                        <div class="item">
                          <div class="card h-100 event-custom-box">
                            <div class="card-header global-event">
                              <h3 class="event-tilte">نهاية السنة</h3>
                              <div class="event-badge">
                                <img
                                  src="../assets/icons/calendar.svg"
                                  alt=""
                                  class=""
                                />
                                <span>الأحد, 28 ابريل 2024</span>
                              </div>
                            </div>
                            <div class="card-body d-flex">
                              <h3 class="event-tilte">نهاية السنة</h3>
                              <p class="event-descrption">
                                وصف فعالية نهاية السنة
                              </p>
                              <div class="event-location">
                                <img
                                  src="../assets/icons/location.svg"
                                  alt=""
                                />
                                <span>جدة</span>
                              </div>
                            </div>
                            <a
                              class="card-footer text-center"
                              href="#"
                            >
                              <span>عرض التفاصيل</span>
                              <img
                                src="../assets/icons/arrow-left.svg"
                                alt=""
                              />
                            </a>
                          </div>
                        </div>
                      </div>
                      <div
                        class="owl-item"
                        style="width: 178px; margin-right: 20px"
                      >
                        <div class="item">
                          <div class="card h-100 event-custom-box">
                            <div class="card-header global-event">
                              <h3 class="event-tilte">نهاية السنة</h3>
                              <div class="event-badge">
                                <img
                                  src="../assets/icons/calendar.svg"
                                  alt=""
                                  class=""
                                />
                                <span>الأحد, 28 ابريل 2024</span>
                              </div>
                            </div>
                            <div class="card-body d-flex">
                              <h3 class="event-tilte">نهاية السنة</h3>
                              <p class="event-descrption">
                                وصف فعالية نهاية السنة
                              </p>
                              <div class="event-location">
                                <img
                                  src="../assets/icons/location.svg"
                                  alt=""
                                />
                                <span>جدة</span>
                              </div>
                            </div>
                            <a
                              class="card-footer text-center"
                              href="#"
                            >
                              <span>عرض التفاصيل</span>
                              <img
                                src="../assets/icons/arrow-left.svg"
                                alt=""
                              />
                            </a>
                          </div>
                        </div>
                      </div>
                      <div
                        class="owl-item"
                        style="width: 178px; margin-right: 20px"
                      >
                        <div class="item">
                          <div class="card h-100 event-custom-box">
                            <div class="card-header local-event">
                              <h3 class="event-tilte">نهاية السنة</h3>
                              <div class="event-badge">
                                <img
                                  src="../assets/icons/calendar.svg"
                                  alt=""
                                  class=""
                                />
                                <span>الأحد, 28 ابريل 2024</span>
                              </div>
                            </div>
                            <div class="card-body d-flex">
                              <h3 class="event-tilte">نهاية السنة</h3>
                              <p class="event-descrption">
                                وصف فعالية نهاية السنة
                              </p>
                              <div class="event-location">
                                <img
                                  src="../assets/icons/location.svg"
                                  alt=""
                                />
                                <span>جدة</span>
                              </div>
                            </div>
                            <a
                              class="card-footer text-center"
                              href="#"
                            >
                              <span>عرض التفاصيل</span>
                              <img
                                src="../assets/icons/arrow-left.svg"
                                alt=""
                              />
                            </a>
                          </div>
                        </div>
                      </div>
                      <div
                        class="owl-item"
                        style="width: 178px; margin-right: 20px"
                      >
                        <div class="item">
                          <div class="card h-100 event-custom-box">
                            <div class="card-header global-event">
                              <h3 class="event-tilte">نهاية السنة</h3>
                              <div class="event-badge">
                                <img
                                  src="../assets/icons/calendar.svg"
                                  alt=""
                                  class=""
                                />
                                <span>الأحد, 28 ابريل 2024</span>
                              </div>
                            </div>
                            <div class="card-body d-flex">
                              <h3 class="event-tilte">نهاية السنة</h3>
                              <p class="event-descrption">
                                وصف فعالية نهاية السنة
                              </p>
                              <div class="event-location">
                                <img
                                  src="../assets/icons/location.svg"
                                  alt=""
                                />
                                <span>جدة</span>
                              </div>
                            </div>
                            <a
                              class="card-footer text-center"
                              href="#"
                            >
                              <span>عرض التفاصيل</span>
                              <img
                                src="../assets/icons/arrow-left.svg"
                                alt=""
                              />
                            </a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- claender -->
            <div
              class="col-sm-4 aos-init aos-animate"
              data-aos="fade-up"
              data-aos-delay="600"
              data-aos-duration="700"
            >
              <div class="content">
                <input
                  type="text"
                  class="form-control"
                  id=""
                  aria-describedby=""
                  placeholder="بحث عن فعاليه "
                  style="margin: auto; width: 90%; font-size: 14px"
                />

                <div id="calendar"></div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
    <footer></footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.js"></script>
    <script src="../assets/fullcalendar/packages/core/main.min.js"></script>
    <script src="../assets/fullcalendar/packages/core/locales/ar.js"></script>
    <script src=" ../assets/fullcalendar/packages/interaction/main.js "></script>
    <script src="../assets/fullcalendar/packages/daygrid/main.js"></script>

    <!-- Custom JS -->
    <script src="../assets/js/script.js"></script>
    <script>
      $(document).ready(function () {
        $(".slider-events").owlCarousel({
          loop: true,
          margin: 10,
          responsiveClass: true,
          rtl: true,
          margin: 10,
          nav: true,
          autoplay: true,
          autoplayTimeout: 4000,
          autoplayHoverPause: false,
          dots: false,
          responsive: {
            0: {
              items: 1,
              nav: true,
            },
            600: {
              items: 2,
              nav: false,
            },
            1000: {
              items: 3,
              nav: true,
            },
          },
        });

        $(".slider-events2").owlCarousel({
          loop: true,
          margin: 10,
          responsiveClass: true,
          rtl: true,
          margin: 10,
          nav: true,
          autoplay: true,
          autoplayTimeout: 4000,
          autoplayHoverPause: false,
          dots: false,
          responsive: {
            0: {
              items: 1,
              nav: true,
            },
            600: {
              items: 2,
              nav: false,
            },
            1000: {
              items: 3,
              nav: true,
            },
          },
        });
      });
    </script>
    <script>
      !(function () {
        var today = moment();

        moment.locale("ar");
        // moment.weekdays(true); // lists weekdays Saturday-Friday in Arabic
        // moment.weekdays(true, 2); //will result in Monday in Arabic
        function Calendar(selector, events) {
          this.el = document.querySelector(selector);
          this.events = events;
          this.current = moment().date(1);
          this.draw();
          var current = document.querySelector(".today");
          if (current) {
            var self = this;
            window.setTimeout(function () {
              self.openDay(current);
            }, 500);
          }
        }

        Calendar.prototype.draw = function () {
          //Create Header
          this.drawHeader();

          //Draw Month
          this.drawMonth();

          this.drawLegend();
        };

        Calendar.prototype.drawHeader = function () {
          var self = this;
          if (!this.header) {
            //Create the header elements
            this.header = createElement("div", "header");
            this.header.className = "header";

            this.title = createElement("h1");

            var right = createElement("div", "right");
            right.addEventListener("click", function () {
              self.nextMonth();
            });

            var left = createElement("div", "left");
            left.addEventListener("click", function () {
              self.prevMonth();
            });

            //Append the Elements
            this.header.appendChild(this.title);
            this.header.appendChild(right);
            this.header.appendChild(left);
            this.el.appendChild(this.header);
          }

          this.title.innerHTML = this.current.format("MMMM YYYY");
        };

        Calendar.prototype.drawMonth = function () {
          var self = this;

          this.events.forEach(function (ev) {
            ev.date = moment(ev.date, "DD/MM/YYYY");
          });

          if (this.month) {
            this.oldMonth = this.month;
            this.oldMonth.className =
              "month out " + (self.next ? "next" : "prev");
            this.oldMonth.addEventListener("webkitAnimationEnd", function () {
              self.oldMonth.parentNode.removeChild(self.oldMonth);
              self.month = createElement("div", "month");
              self.backFill();
              self.currentMonth();
              self.fowardFill();
              self.el.appendChild(self.month);
              window.setTimeout(function () {
                self.month.className =
                  "month in " + (self.next ? "next" : "prev");
              }, 16);
            });
          } else {
            this.month = createElement("div", "month");
            this.el.appendChild(this.month);
            this.backFill();
            this.currentMonth();
            this.fowardFill();
            this.month.className = "month new";
          }
        };

        Calendar.prototype.backFill = function () {
          var clone = this.current.clone();
          var dayOfWeek = clone.day();

          if (!dayOfWeek) {
            return;
          }

          clone.subtract("days", dayOfWeek + 1);

          for (var i = dayOfWeek; i > 0; i--) {
            this.drawDay(clone.add("days", 1));
          }
        };

        Calendar.prototype.fowardFill = function () {
          var clone = this.current.clone().add("months", 1).subtract("days", 1);
          var dayOfWeek = clone.day();

          if (dayOfWeek === 6) {
            return;
          }

          for (var i = dayOfWeek; i < 6; i++) {
            this.drawDay(clone.add("days", 1));
          }
        };

        Calendar.prototype.currentMonth = function () {
          var clone = this.current.clone();

          while (clone.month() === this.current.month()) {
            this.drawDay(clone);
            clone.add("days", 1);
          }
        };

        Calendar.prototype.getWeek = function (day) {
          if (!this.week || day.day() === 0) {
            this.week = createElement("div", "week");
            this.month.appendChild(this.week);
          }
        };

        Calendar.prototype.drawDay = function (day) {
          var self = this;
          this.getWeek(day);

          //Outer Day
          var outer = createElement("div", this.getDayClass(day));
          outer.addEventListener("click", function () {
            self.openDay(this);
          });

          //Day Name
          var name = createElement("div", "day-name", day.format("ddd"));

          //Day Number
          var number = createElement("div", "day-number", day.format("DD"));

          //Events
          var events = createElement("div", "day-events");
          this.drawEvents(day, events);

          outer.appendChild(name);
          outer.appendChild(number);
          outer.appendChild(events);
          this.week.appendChild(outer);
        };

        Calendar.prototype.drawEvents = function (day, element) {
          if (day.month() === this.current.month()) {
            var todaysEvents = this.events.reduce(function (memo, ev) {
              if (ev.date.isSame(day, "day")) {
                memo.push(ev);
              }
              return memo;
            }, []);

            todaysEvents.forEach(function (ev) {
              var evSpan = createElement("span", ev.color);
              element.appendChild(evSpan);
            });
          }
        };

        Calendar.prototype.getDayClass = function (day) {
          classes = ["day"];
          if (day.month() !== this.current.month()) {
            classes.push("other");
          } else if (today.isSame(day, "day")) {
            classes.push("today");
          }
          return classes.join(" ");
        };

        Calendar.prototype.openDay = function (el) {
          var details, arrow;
          var dayNumber =
            +el.querySelectorAll(".day-number")[0].innerText ||
            +el.querySelectorAll(".day-number")[0].textContent;
          var day = this.current.clone().date(dayNumber);

          var currentOpened = document.querySelector(".details");

          //Check to see if there is an open detais box on the current row
          if (currentOpened && currentOpened.parentNode === el.parentNode) {
            details = currentOpened;
            arrow = document.querySelector(".arrow");
          } else {
            //Close the open events on differnt week row
            //currentOpened && currentOpened.parentNode.removeChild(currentOpened);
            if (currentOpened) {
              currentOpened.addEventListener("webkitAnimationEnd", function () {
                currentOpened.parentNode.removeChild(currentOpened);
              });
              currentOpened.addEventListener("oanimationend", function () {
                currentOpened.parentNode.removeChild(currentOpened);
              });
              currentOpened.addEventListener("msAnimationEnd", function () {
                currentOpened.parentNode.removeChild(currentOpened);
              });
              currentOpened.addEventListener("animationend", function () {
                currentOpened.parentNode.removeChild(currentOpened);
              });
              currentOpened.className = "details out";
            }

            //Create the Details Container
            details = createElement("div", "details in");

            //Create the arrow
            var arrow = createElement("div", "arrow");

            //Create the event wrapper

            details.appendChild(arrow);
            el.parentNode.appendChild(details);
          }

          var todaysEvents = this.events.reduce(function (memo, ev) {
            if (ev.date.isSame(day, "day")) {
              memo.push(ev);
            }
            return memo;
          }, []);

          this.renderEvents(todaysEvents, details);

          arrow.style.left =
            el.offsetLeft - el.parentNode.offsetLeft + 27 + "px";
        };

        Calendar.prototype.renderEvents = function (events, ele) {
          //Remove any events in the current details element
          var currentWrapper = ele.querySelector(".events");
          var wrapper = createElement(
            "div",
            "events in" + (currentWrapper ? " new" : "")
          );

          events.forEach(function (ev) {
            var div = createElement("div", "event");
            var square = createElement("div", "event-category " + ev.color);
            var span = createElement("span", "", ev.eventName);

            div.appendChild(square);
            div.appendChild(span);
            wrapper.appendChild(div);
          });

          if (!events.length) {
            var div = createElement("div", "event empty");
            var span = createElement("span", "", "لا يوحد فعاليات");

            div.appendChild(span);
            wrapper.appendChild(div);
          }

          if (currentWrapper) {
            currentWrapper.className = "events out";
            currentWrapper.addEventListener("webkitAnimationEnd", function () {
              currentWrapper.parentNode.removeChild(currentWrapper);
              ele.appendChild(wrapper);
            });
            currentWrapper.addEventListener("oanimationend", function () {
              currentWrapper.parentNode.removeChild(currentWrapper);
              ele.appendChild(wrapper);
            });
            currentWrapper.addEventListener("msAnimationEnd", function () {
              currentWrapper.parentNode.removeChild(currentWrapper);
              ele.appendChild(wrapper);
            });
            currentWrapper.addEventListener("animationend", function () {
              currentWrapper.parentNode.removeChild(currentWrapper);
              ele.appendChild(wrapper);
            });
          } else {
            ele.appendChild(wrapper);
          }
        };

        Calendar.prototype.drawLegend = function () {
          var legend = createElement("div", "legend");
          var calendars = this.events
            .map(function (e) {
              return e.calendar + "|" + e.color;
            })
            .reduce(function (memo, e) {
              if (memo.indexOf(e) === -1) {
                memo.push(e);
              }
              return memo;
            }, [])
            .forEach(function (e) {
              var parts = e.split("|");
              var entry = createElement("span", "entry " + parts[1], parts[0]);
              legend.appendChild(entry);
            });
          this.el.appendChild(legend);
        };

        Calendar.prototype.nextMonth = function () {
          this.current.add("months", 1);
          this.next = true;
          this.draw();
        };

        Calendar.prototype.prevMonth = function () {
          this.current.subtract("months", 1);
          this.next = false;
          this.draw();
        };

        window.Calendar = Calendar;

        function createElement(tagName, className, innerText) {
          var ele = document.createElement(tagName);
          if (className) {
            ele.className = className;
          }
          if (innerText) {
            ele.innderText = ele.textContent = innerText;
          }
          return ele;
        }
      })();
    </script>
  </body>
</html>
